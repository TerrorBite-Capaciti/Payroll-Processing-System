#!/bin/bash

# Compile all COBOL files
echo "Compiling COBOL files..."
cobc -x src/payroll.cbl src/user_management.cbl src/cli_menu.cbl src/employee.cbl src/tax_calculation.cbl src/payslip_generator.cbl src/leave_deductions.cbl src/db_interaction.cbl

# Check if compilation was successful
if [ $? -eq 0 ]; then
    echo "Compilation successful!"
else
    echo "Compilation failed! Please check for errors."
    exit 1
fi

# Run the compiled program
echo "Running the program..."
./payroll

# Check if the program ran successfully
if [ $? -eq 0 ]; then
    echo "Program executed successfully!"
else
    echo "Program execution failed! Please check for errors."
    exit 1
fi
